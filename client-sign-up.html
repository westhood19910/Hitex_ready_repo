<!DOCTYPE html>
<html lang="en">
<head> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HiTex EdiTex - Client Sign Up</title>
<script src="Embednav.js" defer></script>
<script src="freshtex.js" defer></script> 
<script src="sign-up.js" defer></script>
<link rel="stylesheet" href="ser_them.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="fresh.css">  
<link rel="stylesheet" href="Embednav.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
:root {
    --blue: #032672;
    --red: #D54C4F;
    --major-header-font-weight: 700;
}

.unl_live-signup-container {
    background-color: white;
    width: 100%;
    margin: 5em auto;
    max-width: 780px;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.unl_live-main-heading a {
    color: var(--blue);
    text-align: center;
    font-size: 2.2rem;
    font-weight: var(--major-header-font-weight);
    margin-bottom: 25px;
    display: block;
    text-decoration: none;
}

@media screen and (max-width: 400px) {
    .unl_live-main-heading a {
        font-size: 1.8rem;
        margin-bottom: 20px;
    }
}

.unl_live-input-group {
    margin-bottom: 20px;
    position: relative;
}

.unl_live-label {
    display: block;
    color: var(--blue);
    margin-bottom: 8px;
    font-weight: 600;
    font-size: 15px;
}

.unl_live-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
}

.unl_live-input,
.unl_live-select {
    width: 100%;
    border: none;
    border-bottom: 2px solid var(--blue);
    padding: 8px 40px 8px 28px;
    font-size: 15px;
    background: transparent;
    transition: border-color 0.3s ease;
    box-sizing: border-box;
    outline: none;
}

.unl_live-input:focus,
.unl_live-select:focus {
    border-bottom-color: var(--red);
}

/* Left Side Icons */
.unl_live-input-wrapper .fa-user,
.unl_live-input-wrapper .fa-envelope,
.unl_live-input-wrapper .fa-lock,
.unl_live-input-wrapper .fa-graduation-cap,
.unl_live-input-wrapper .fa-building {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    color: var(--blue);
    z-index: 2;
    pointer-events: none;
}

/* Enhanced Password Toggle */
.unl_live-input-wrapper #togglePassword,
.unl_live-input-wrapper #toggleConfirmPassword {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #666;
    font-size: 16px;
    z-index: 10;
    padding: 4px;
    border-radius: 3px;
    user-select: none;
    transition: all 0.2s ease;
    background: transparent;
    border: none;
    outline: none;
    min-width: 24px;
    min-height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.unl_live-input-wrapper #togglePassword:hover,
.unl_live-input-wrapper #toggleConfirmPassword:hover {
    color: var(--blue);
    background-color: rgba(0, 0, 0, 0.05);
}

.unl_live-input-wrapper #togglePassword:active,
.unl_live-input-wrapper #toggleConfirmPassword:active {
    color: var(--red);
    transform: translateY(-50%) scale(0.95);
}

/* Special padding for password fields */
input#password,
input#confirmPassword {
    padding-right: 40px !important;
}

.unl_live-submit-button {
    width: 100%;
    background-color: var(--blue);
    color: white;
    border: none;
    padding: 12px;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 20px;
}

.unl_live-submit-button:hover {
    background-color: var(--red);
}

.unl_live-submit-button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

.unl_live-login-redirect {
    text-align: center;
    margin-top: 15px;
    color: var(--blue);
    font-size: 14px;
}

.unl_live-login-link {
    color: var(--red);
    text-decoration: none;
    font-weight: 600;
}

.unl_live-login-link:hover {
    text-decoration: underline;
}

.info-link {
    color: var(--blue);
    cursor: pointer;
    text-decoration: underline;
    font-size: 12px;
    margin-top: 5px;
    display: block;
}

.info-link:hover {
    color: var(--red);
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
}

.modal-content {
    background-color: white;
    margin: 15% auto;
    padding: 20px;
    border-radius: 10px;
    width: 80%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover {
    color: var(--red);
}

.error-message {
    color: var(--red);
    font-size: 12px;
    margin-top: 5px;
    display: none;
    font-weight: 500;
}

.success-message {
    color: green;
    font-size: 12px;
    margin-top: 5px;
    font-weight: 500;
}

.hidden {
    display: none;
}

/* University suggestions dropdown */
.university-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #ccc;
    border-top: none;
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000;
    border-radius: 0 0 6px 6px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.university-suggestion-item {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
    transition: background-color 0.2s ease;
}

.university-suggestion-item:hover {
    background-color: #f8f9fa;
}

.university-suggestion-item:last-child {
    border-bottom: none;
}

/* Mobile Responsiveness */
@media screen and (max-width: 768px) {
    .unl_live-signup-container {
        margin: 2em auto;
        padding: 20px;
    }

    .unl_live-input-wrapper #togglePassword,
    .unl_live-input-wrapper #toggleConfirmPassword {
        right: 5px;
        font-size: 18px;
        padding: 6px;
        min-width: 28px;
        min-height: 28px;
    }
    
    input#password,
    input#confirmPassword {
        padding-right: 45px !important;
    }
}
</style>
</head> 

<body>
    <!-- Navigation (keeping your existing nav) -->
    <nav class="nav__bar_oi">
      <div class="nav__bar_oi-logo">
        <a href="index.html"><img src="assets/png_20221026_003820_0000.png" alt="HiTex EdiTex Logo"></a>
      </div>
      
      <button class="nav__bar_oi-toggle" id="navToggle">
        <span class="nav__bar_oi-toggle-line"></span>
        <span class="nav__bar_oi-toggle-line"></span>
        <span class="nav__bar_oi-toggle-line"></span>
      </button>
      
      <ul class="nav__bar_oi-menu" id="navMenu">
        <li class="nav__bar_oi-menu-item">
          <a href="about.html" class="nav__bar_oi-menu-link">About Us</a>
        </li>
        <li class="nav__bar_oi-menu-item">
          <a href="#services" class="nav__bar_oi-menu-link">Services</a>
          <div class="nav__bar_oi-dropdown">
            <a href="language-editng.html" class="nav__bar_oi-dropdown-item">Language Editing</a>
            <a href="Scientific.html" class="nav__bar_oi-dropdown-item">Scientific Editing</a>
            <a href="technichal.html" class="nav__bar_oi-dropdown-item">Technical Editing</a>
            <a href="translate.html" class="nav__bar_oi-dropdown-item">Translation Services</a>
            <a href="service-levels.html" class="nav__bar_oi-dropdown-item">Service Levels</a>
            <a href="pricing.html" class="nav__bar_oi-dropdown-item">Pricing</a>
            <a href="auhtoredly.html" class="nav__bar_oi-dropdown-item">Authoredly</a>
          </div>
        </li>
        <li class="nav__bar_oi-menu-item">
          <a href="#careers" class="nav__bar_oi-menu-link">Careers</a>
          <div class="nav__bar_oi-dropdown">
            <a href="life-at-hitex.html" class="nav__bar_oi-dropdown-item">Life at HiTex EdiTex</a>
            <a href="In-house.html" class="nav__bar_oi-dropdown-item">In-house</a>
            <a href="freelance.html" class="nav__bar_oi-dropdown-item">Freelance</a>
          </div>
        </li>
        <li class="nav__bar_oi-menu-item">
          <a href="contact.html" class="nav__bar_oi-menu-link">Contact Us</a>
        </li>
        <li class="nav__bar_oi-menu-item">
          <a href="#resources" class="nav__bar_oi-menu-link">Helpful Resources</a>
          <div class="nav__bar_oi-dropdown">
            <a href="support-faq.html" class="nav__bar_oi-dropdown-item">Support and FAQs</a>
            <a href="hitex-hub.html" class="nav__bar_oi-dropdown-item">The Hitex Hub</a>
          </div>
        </li>
        <div class="nav__bar_oi-actions">
          <button class="nav__bar_oi-button nav__bar_oi-button-signup">Client Sign-Up</button>
          <button class="nav__bar_oi-button nav__bar_oi-button-login">Client Log-in</button>
        </div>
        <div class="xzy-container-88">
         <div class="qrs-icon-hold-42">
            <a href="https://www.threads.net/@hitexeditex">
                <img src="assets/threads-icon.svg" class="pqr-img-elem-91" alt="Threads Icon">
            </a>
        </div>
        <div class="qrs-icon-hold-42">
            <a href="https://www.linkedin.com/company/hitexeditex/">
                <img src="assets/linkedin-app-icon.svg" class="pqr-img-elem-91" alt="LinkedIn Icon">
            </a>
        </div>
        <div class="qrs-icon-hold-42">
            <a href="https://x.com/HiTexEdiTex" target="_blank">
                <img src="assets/x-social-media-black-icon.svg" class="pqr-img-elem-91" alt="X Icon">
            </a>
        </div>
        <div class="qrs-icon-hold-42">
            <a href="https://www.instagram.com/hitexeditex" target="_blank">
                <img src="assets/ig-instagram-icon.svg" class="pqr-img-elem-91" alt="Instagram Icon">
            </a>
        </div>
    </div>
      </ul>
      
      <!-- Search bar and social media icons -->
      <div class="nav__bar_oi-utility">
        <div class="nav__bar_oi-search">
          <button class="nav__bar_oi-search-icon" id="searchToggle">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
          </button>
          <div class="nav__bar_oi-search-container" id="searchContainer">
            <input type="text" class="nav__bar_oi-search-input" placeholder="Search..." aria-label="Search">
            <button class="nav__bar_oi-search-close" id="searchClose">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>
        <div class="nav__bar_oi-social">
          <div class="new_loger_nav__bar_oi-actions">
            <a href="client-sign-up.html" class="new_loger_nav__bar_oi-button new_loger_nav__bar_oi-button-signup">Client Sign-up</a>
            <a href="client-login.html" class="new_loger_nav__bar_oi-button new_loger_nav__bar_oi-button-login">Client Log-in</a>
          </div>
       <div class="intbeh_01">
                            <div class="kli_002_wer">
                                <a href="https://www.threads.net/@hitexeditex">
                                <img src="assets/threads-icon.svg" class="alb-im-001">
                               </a>
                            </div>
                               </div>
                            <div class="kli_002_wer">
                        <a href="https://www.linkedin.com/company/hitexeditex/">
                        <img src="assets/linkedin-app-icon.svg" class="alb-im-001">
                       </a>
                       </div>
                       <div class="kli_002_wer">
                       <a href="https://x.com/HiTexEdiTex" target="_blank">
                        <img src="assets/x-social-media-black-icon.svg" alt="Twitter Icon" class="alb-im-001">
                      </a>
                      </div>  
                      <div class="kli_002_wer">
                       <a href="https://www.instagram.com/hitexeditex" target="_blank"  >
                        <img src="assets/ig-instagram-icon.svg" class="alb-im-001"></a>
                        </div>  
        </div>
      </div>
      <div class="nav__bar_oi-overlay" id="navOverlay"></div>
    </nav>

    <!-- Main Signup Form -->
    <div class="unl_live-signup-container">
        <h1 class="unl_live-main-heading">
            <a href="#">Create Your Account</a>
        </h1>

        <form id="signupForm">
            <!-- Salutation -->
            <div class="unl_live-input-group">
                <label for="salutation" class="unl_live-label">Salutation (Optional)</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-user"></i>
                    <select id="salutation" name="salutation" class="unl_live-select">
                        <option value="">Select (Optional)</option>
                        <option value="Prof.">Prof.</option>
                        <option value="Dr.">Dr.</option>
                        <option value="Mr.">Mr.</option>
                        <option value="Mrs.">Mrs.</option>
                        <option value="Ms.">Ms.</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>

            <!-- First Name -->
            <div class="unl_live-input-group">
                <label for="firstName" class="unl_live-label">First Name *</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-user"></i>
                    <input type="text" id="firstName" name="firstName" class="unl_live-input" 
                           placeholder="Enter your first name" required>
                </div>
            </div>

            <!-- Last Name -->
            <div class="unl_live-input-group">
                <label for="lastName" class="unl_live-label">Last Name *</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-user"></i>
                    <input type="text" id="lastName" name="lastName" class="unl_live-input" 
                           placeholder="Enter your last name" required>
                </div>
            </div>

            <!-- Primary Email -->
            <div class="unl_live-input-group">
                <label for="email" class="unl_live-label">Primary Email Address *</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-envelope"></i>
                    <input type="email" id="email" name="email" class="unl_live-input" 
                           placeholder="Enter your primary email address" required>
                </div>
            </div>

            <!-- Password -->
            <div class="unl_live-input-group">
                <label for="password" class="unl_live-label">Password *</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-lock"></i>
                    <input type="password" id="password" name="password" class="unl_live-input" 
                           placeholder="Enter your password (min 8 characters)" required>
                    <i class="fa-solid fa-eye" id="togglePassword"></i>
                </div>
            </div>

            <!-- Confirm Password -->
            <div class="unl_live-input-group">
                <label for="confirmPassword" class="unl_live-label">Confirm Password *</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-lock"></i>
                    <input type="password" id="confirmPassword" name="confirmPassword" class="unl_live-input" 
                           placeholder="Confirm your password" required>
                    <i class="fa-solid fa-eye" id="toggleConfirmPassword"></i>
                </div>
            </div>

            <!-- Current Institution -->
            <div class="unl_live-input-group">
                <label for="currentInstitution" class="unl_live-label">Current Institution (Optional)</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-graduation-cap"></i>
                    <input type="text" id="currentInstitution" name="currentInstitution" class="unl_live-input" 
                           placeholder="Enter your institution for potential discounts" autocomplete="off">
                </div>
            </div>

            <!-- Institutional Email (Conditional) -->
            <div class="unl_live-input-group hidden" id="institutionalEmailGroup">
                <label for="institutionalEmail" class="unl_live-label">Institutional Email Address</label>
                <div class="unl_live-input-wrapper">
                    <i class="fa-solid fa-building"></i>
                    <input type="email" id="institutionalEmail" name="institutionalEmail" class="unl_live-input" 
                           placeholder="Enter your institutional email">
                </div>
                <span class="info-link" id="whyEmailLink">Why am I being asked this?</span>
                <div class="error-message" id="emailError">
                    Please enter a valid institutional email address.
                </div>
            </div>

            <button type="submit" class="unl_live-submit-button">
                Create Account
            </button>
        </form>

        <p class="unl_live-login-redirect">
            Already have an account? 
            <a href="client-login.html" class="unl_live-login-link">Log In</a>
        </p>
    </div>

    <!-- Modal for institutional discount info -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Institutional Discount Information</h3>
            <p>We offer special discounts for verified academic and research institutions. 
            By providing your institutional email, we can verify your affiliation and 
            apply eligible discounts to your services.</p>
            <p><strong>Your privacy is important:</strong> We only use this information 
            for verification purposes and will never share it with third parties.</p>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Enhanced password toggle functionality
        function setupPasswordToggle(toggleId, passwordId) {
            const toggle = document.getElementById(toggleId);
            const password = document.getElementById(passwordId);
            
            if (toggle && password) {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const isPassword = password.getAttribute('type') === 'password';
                    password.setAttribute('type', isPassword ? 'text' : 'password');
                    
                    // Update icon
                    this.classList.toggle('fa-eye');
                    this.classList.toggle('fa-eye-slash');
                });
            }
        }

        // Initialize password toggles
        setupPasswordToggle('togglePassword', 'password');
        setupPasswordToggle('toggleConfirmPassword', 'confirmPassword');

        // Enhanced institution input with university search
        const institutionInput = document.getElementById('currentInstitution');
        const institutionalEmailGroup = document.getElementById('institutionalEmailGroup');
        const institutionalEmailInput = document.getElementById('institutionalEmail');
        
        if (institutionInput) {
            let searchTimeout;
            
            institutionInput.addEventListener('input', function() {
                const query = this.value.trim();
                
                // Show/hide institutional email field
                if (query) {
                    institutionalEmailGroup?.classList.remove('hidden');
                    if (institutionalEmailInput) institutionalEmailInput.required = true;
                } else {
                    institutionalEmailGroup?.classList.add('hidden');
                    if (institutionalEmailInput) {
                        institutionalEmailInput.required = false;
                        institutionalEmailInput.value = '';
                    }
                    hideUniversitySuggestions();
                    return;
                }

                // University search with debouncing
                if (query.length >= 2) {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(async () => {
                        await searchUniversities(query, institutionInput);
                    }, 300);
                }
            });

            // Hide suggestions when clicking outside
            document.addEventListener('click', function(e) {
                if (!institutionInput.contains(e.target)) {
                    hideUniversitySuggestions();
                }
            });
        }

        // University search function
        async function searchUniversities(query, inputElement) {
            try {
                const response = await fetch(`http://universities.hipolabs.com/search?name=${encodeURIComponent(query)}&limit=5`);
                const universities = await response.json();
                
                if (universities && universities.length > 0) {
                    showUniversitySuggestions(universities, inputElement);
                } else {
                    hideUniversitySuggestions();
                }
            } catch (error) {
                console.log('University search error:', error);
                hideUniversitySuggestions();
            }
        }

        function showUniversitySuggestions(universities, inputElement) {
            hideUniversitySuggestions(); // Remove existing

            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.className = 'university-suggestions';
            suggestionsDiv.id = 'universitySuggestions';

            universities.forEach(uni => {
                const item = document.createElement('div');
                item.className = 'university-suggestion-item';
                item.textContent = `${uni.name}${uni.country ? ` (${uni.country})` : ''}`;
                
                item.addEventListener('click', () => {
                    inputElement.value = uni.name;
                    hideUniversitySuggestions();
                    inputElement.focus();
                });
                
                suggestionsDiv.appendChild(item);
            });

            const wrapper = inputElement.closest('.unl_live-input-wrapper');
            wrapper.style.position = 'relative';
            wrapper.appendChild(suggestionsDiv);
        }

        function hideUniversitySuggestions() {
            const existing = document.getElementById('universitySuggestions');
            if (existing) existing.remove();
        }

        // Enhanced email validation with better error handling
        async function validateInstitutionalEmail(email) {
            try {
                const response = await fetch('https://all-branched-end.onrender.com/validate-email', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                return await response.json();
            } catch (error) {
                console.error('Email validation error:', error);
                return {
                    valid: false,
                    message: 'Unable to validate email. Please try again later.',
                    error: error.message
                };
            }
        }

        // Real-time email validation with improved UX
        if (institutionalEmailInput) {
            let emailValidationTimeout;
            const emailError = document.getElementById('emailError');
            
            institutionalEmailInput.addEventListener('input', function() {
                const email = this.value.trim();

                clearTimeout(emailValidationTimeout);
                
                // Clear existing messages
                if (emailError) emailError.style.display = 'none';
                const existingSuccess = document.getElementById('emailSuccess');
                if (existingSuccess) existingSuccess.remove();

                if (!email) return;

                // Show validation in progress
                if (emailError) {
                    emailError.textContent = 'Validating institutional email...';
                    emailError.style.color = '#666';
                    emailError.style.display = 'block';
                }

                emailValidationTimeout = setTimeout(async () => {
                    const validation = await validateInstitutionalEmail(email);
                    
                    if (validation.valid) {
                        if (emailError) emailError.style.display = 'none';
                        
                        // Show success message with institution info
                        if (validation.institution) {
                            const successMsg = document.createElement('div');
                            successMsg.id = 'emailSuccess';
                            successMsg.className = 'success-message';
                            successMsg.textContent = `âœ“ Verified: ${validation.institution}${validation.country ? ` (${validation.country})` : ''}`;
                            
                            institutionalEmailInput.parentNode.parentNode.appendChild(successMsg);
                        }
                    } else {
                        if (emailError) {
                            emailError.textContent = validation.message || 'This email domain is not recognized as an institutional email address.';
                            emailError.style.color = 'var(--red)';
                            emailError.style.display = 'block';
                        }
                    }
                }, 1500);
            });
        }

        // Modal functionality
        const modal = document.getElementById('infoModal');
        const whyEmailLink = document.getElementById('whyEmailLink');
        const closeModal = document.querySelector('.close');

        if (whyEmailLink && modal) {
            whyEmailLink.addEventListener('click', () => {
                modal.style.display = 'block';
            });
        }

        if (closeModal && modal) {
            closeModal.addEventListener('click', () => {
                modal.style.display = 'none';
            });
        }

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Enhanced form submission with better error handling
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const form = e.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            const submitButton = document.querySelector('.unl_live-submit-button');
            
            // Store original button text
            const originalButtonText = submitButton.textContent;

            try {
                // Client-side validation
                const validationErrors = validateFormData(data);
                if (validationErrors.length > 0) {
                    alert('Please fix the following errors:\n' + validationErrors.join('\n'));
                    return;
                }

                // Validate institutional email if provided
                if (data.institutionalEmail && data.institutionalEmail.trim()) {
                    submitButton.textContent = 'Validating Email...';
                    submitButton.disabled = true;

                    const emailValidation = await validateInstitutionalEmail(data.institutionalEmail);
                    
                    if (!emailValidation.valid) {
                        const emailError = document.getElementById('emailError');
                        if (emailError) {
                            emailError.textContent = emailValidation.message || 'Please enter a valid institutional email address.';
                            emailError.style.color = 'var(--red)';
                            emailError.style.display = 'block';
                        }
                        
                        throw new Error('Invalid institutional email address');
                    }
                }

                // Submit registration
                submitButton.textContent = 'Creating Account...';
                submitButton.disabled = true;

                const response = await fetch('https://all-branched-end.onrender.com/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        salutation: data.salutation || null,
                        firstName: data.firstName,
                        lastName: data.lastName,
                        email: data.email,
                        password: data.password,
                        currentInstitution: data.currentInstitution || null,
                        institutionalEmail: data.institutionalEmail || null
                    }),
                });

                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error || `Registration failed (${response.status})`);
                }

                // Handle successful registration
                handleRegistrationSuccess(result);

            } catch (error) {
                console.error('Registration error:', error);
                
                // Show user-friendly error message
                let errorMessage = 'Registration failed. Please try again.';
                
                if (error.message.includes('email')) {
                    errorMessage = 'There was an issue with your email address. Please check and try again.';
                } else if (error.message.includes('network') || error.message.includes('fetch')) {
                    errorMessage = 'Network error. Please check your connection and try again.';
                } else if (error.message) {
                    errorMessage = error.message;
                }
                
                alert(errorMessage);
            } finally {
                submitButton.textContent = originalButtonText;
                submitButton.disabled = false;
            }
        });

        // Form validation function
        function validateFormData(data) {
            const errors = [];

            if (!data.firstName || data.firstName.trim().length < 2) {
                errors.push('First name must be at least 2 characters long');
            }

            if (!data.lastName || data.lastName.trim().length < 2) {
                errors.push('Last name must be at least 2 characters long');
            }

            if (!data.email || !isValidEmail(data.email)) {
                errors.push('Please enter a valid email address');
            }

            if (!data.password || data.password.length < 8) {
                errors.push('Password must be at least 8 characters long');
            }

            if (data.password !== data.confirmPassword) {
                errors.push('Passwords do not match');
            }

            // Password strength check
            if (data.password && !isStrongPassword(data.password)) {
                errors.push('Password should contain at least one uppercase letter, one lowercase letter, and one number');
            }

            return errors;
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function isStrongPassword(password) {
            const hasUpper = /[A-Z]/.test(password);
            const hasLower = /[a-z]/.test(password);
            const hasNumber = /\d/.test(password);
            return hasUpper && hasLower && hasNumber;
        }

        function handleRegistrationSuccess(result) {
            let successMessage = result.message || 'Account created successfully!';
            
            if (result.institutionalUser) {
                successMessage += ' You may qualify for institutional discounts!';
            }

            if (result.requiresVerification) {
                // Email verification required
                alert(successMessage + ' Please check your email to verify your account.');
                // Could redirect to verification page
            } else if (result.token) {
                // Successful registration with immediate login
                localStorage.removeItem('authToken');
                localStorage.setItem('authToken', result.token);
                
                alert(successMessage);
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = 'client-dashboard.html';
                }, 500);
            } else {
                // Registration successful, need to login
                alert(successMessage + ' Please log in to continue.');
                window.location.href = 'client-login.html';
            }
        }

        // Add real-time password strength indicator
        const passwordInput = document.getElementById('password');
        if (passwordInput) {
            passwordInput.addEventListener('input', function() {
                // You could add a password strength indicator here
                const isStrong = isStrongPassword(this.value);
                const minLength = this.value.length >= 8;
                
                // Visual feedback could be added here
                if (minLength && isStrong) {
                    this.style.borderBottomColor = 'green';
                } else if (minLength) {
                    this.style.borderBottomColor = 'orange';
                } else {
                    this.style.borderBottomColor = 'var(--red)';
                }
            });
        }

        // Add real-time confirm password validation
        const confirmPasswordInput = document.getElementById('confirmPassword');
        if (confirmPasswordInput && passwordInput) {
            confirmPasswordInput.addEventListener('input', function() {
                if (this.value === passwordInput.value) {
                    this.style.borderBottomColor = 'green';
                } else {
                    this.style.borderBottomColor = 'var(--red)';
                }
            });
        }

        console.log('Enhanced signup form initialized successfully!');
    });
    </script>
</body>
</html>